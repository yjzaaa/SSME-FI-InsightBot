# 📊 图表恢复使用说明

## 问题描述
在 Chainlit 聊天界面中恢复历史对话时，之前的图表可能无法正确显示。这是由于 Chainlit 框架的技术限制造成的。

## 🔧 解决方案

### 方法1：使用快捷命令
输入以下任一命令：
- `重新显示图表`
- `重新生成图表` 
- `刷新图表`
- `refresh charts`
- `regenerate charts`

### 方法2：重新提出数据分析请求
重新输入您之前的数据分析请求，例如：
- "显示11115534物料7月内发生的频发问题"
- "分析9400054供应商过往3年的质量表现趋势"
- "生成问题分布的饼图"

## ✅ 功能特点

### 自动检测
- 系统会在恢复聊天时自动检测图表显示问题
- 主动提供解决方案提示

### 智能Fallback
- 如果图表无法正常显示，会提供文本格式的数据摘要
- 包含所有关键数据点，确保信息不丢失

### 支持的图表类型
1. **基础图表**
   - 饼图 (pie)
   - 柱状图 (bar)
   - 折线图 (line)

2. **高级图表**
   - 堆叠柱状图 (stacked_bar)
   - 分组柱状图 (grouped_bar)
   - 柱状图+折线图组合 (bar_line)
   - 直方图 (histogram)

## 🚀 最佳实践

### 恢复聊天后的操作
1. 查看系统提示消息
2. 如果看不到图表，使用快捷命令或重新提出请求
3. 系统会重新生成相同的图表

### 数据分析请求格式
为了获得最佳的图表生成效果，建议使用明确的分析请求：
- 指定具体的数据范围（如时间、物料代码等）
- 明确分析目标（趋势、分布、对比等）
- 如果需要特定图表类型，可以在请求中说明

## 📝 示例对话

**用户**：恢复聊天后看不到之前的图表了

**系统**：📊 图表恢复提示 - 如果您在历史对话中看不到图表，可以说"重新显示图表"或重新提出相同的数据分析请求来重新生成图表。

**用户**：重新显示图表

**系统**：🔄 正在重新生成历史图表... 由于技术限制，请重新提出您之前的数据分析请求，我会重新生成相同的图表。

**用户**：分析11115534物料7月内的问题分布

**系统**：[重新生成相应的图表和分析]

## ⚠️ 注意事项

1. **图表数据安全**：即使图表显示有问题，所有数据都会以文本形式保留
2. **功能持续改进**：我们正在持续优化图表恢复功能
3. **建议操作**：建议在重要的数据分析后保存截图，以备参考

---

💡 如有其他问题，请直接在聊天中描述您遇到的具体情况，我们会提供相应的解决方案。
